<!DOCTYPE html>
<<<<<<< HEAD
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Akka-mongodb by jmarin</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Akka-mongodb</h1>
        <h2>Real Time Analytics with Akka &amp; MongoDB</h2>

        <section id="downloads">
          <a href="https://github.com/jmarin/akka-mongodb/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/jmarin/akka-mongodb/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/jmarin/akka-mongodb" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>akka-mongodb</h1>

<p>Real Time Analytics with Akka &amp; MongoDB</p>
      </section>
    </div>

    
  </body>
</html>
=======
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="externals/deckjs/core/deck.core.css">
    <link rel="stylesheet" href="externals/deckjs/extensions/navigation/deck.navigation.css">
    <link rel="stylesheet" href="externals/deckjs/extensions/goto/deck.goto.css">
    <link rel="stylesheet" href="externals/deckjs/extensions/hash/deck.hash.css">
    <link rel="stylesheet" href="externals/deckjs/themes/style/neon.css">
    <link rel="stylesheet" href="externals/deckjs/themes/transition/horizontal-slide.css">

 <style>
    body {
        font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;
    }
    .deck-container .slide h1 {
        text-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
    }
    .deck-container .slide h2 {
        color: #2d60b5;
        border-bottom-color: #bada55;
    }
    .slide p, .slide li {
        font-size: 150%;
    }
    .subtle {
        color: #666;
    }
    .slide em.subtle {
        font-size: 50%;
    }
    ul.authors {
        position: absolute;
        top: 80%;
    }
    ul.authors li {
        list-style: none;
        font-size: 1.25em;
        font-weight: bold;
    }
    div.caption {
        font-size: 2.25em;
        text-align: center;
    }

    section.slide .split{
        width: 40%;
        padding: 2% 4%;
        position: relative;
        top: 0;
        left: 0;
        float: left;
    }

    .split:nth-child(2n+1){
        float: right;
    }
    
    .slide img.olTileImage {
        margin: 0;
        max-width: inherit;
    }
    div.caption {
        font-size: 2.25em;
        text-align: center;
    }

    pre{
        color: #0099ff;
    }

    .olControlAttribution {
        bottom: 3px;
    }
    </style>

  <script src="externals/deckjs/modernizr.custom.js"></script>
</head>

<body class="deck-container">


   <div class="slide" id="frontpage">
       <h1>Real Time Analytics with Akka & MongoDB</h1>
      <h2>Tech Talk</h2>
       <ul class="authors">
           <li>Juan Marin<br>January 2013</li>
       </ul>
   </div>

  <section class="slide" id="whats-real-time">
      <h1>What is real time?</h1>
  </section>

  
  <section class="slide" id="its-relative">
      <h1 style="position:absolute;top:15%;">It's all relative</h1>
      <img style="position:absolute;top:30%;left:5%;" src="img/back_to_future.jpg">	
  </section>


  <section class="slide" id="realtime-agree">
    <div style="position:relative;top:250px;left:10%">
      <h3>But we can probably agree:</h3>
      <p class="subtle">
      <ul>
        <li>Reactive</li>
	<li>Operational deadlines --> available "soon"</li>
	<li>Order of magnitude ~ milliseconds</li>
      </ul>
      </p>
    </div>
  </section>  

  <section class="slide" id="be-fast">
      <h1 style="position:absolute;top:20%">Being fast is important</h1>
      <img style="position:absolute;top:50%;left:30%" src="img/shark_attack.jpg"/>
  </section>

  <section class="slide" id="big-data">
    <div>
      <h1>Big Data Analytics</h1>
      <h3 style="position:relative;top:520px;left:15%;">I had to write that because it sounds cool</h3>
    </div>
  </section>


  <section class="slide" id="but-seriously">
    <h1 style="position:absolute;top:20%;">But seriously...</h1>
    <div style="position:relative;top:250px;left:5%">
      <p class="subtle">
      <ul>
        <li>90% of total data volume in the history of mankind has been produced in the last 2 years</li>
	<li>As of late 2012, "Big Data" usually describes data sets from several dozen terabytes to petabytes</li>
	<li>Guess What? A lot of that data is geospatial...</li>
      </ul>
      </p>
    </div>
  </section>  


  <section class="slide" id="sdss">
    <div style="position:absolute;top:20%;>"<p class="subtle">
      <h4>When the Sloan Digital Sky Survey (SDSS) began collecting astronomical data in 200, it collected more information in the first weeks of operation than in the whole history of astronomy. Total amount ~ 140TB</h4>
    </p>
    </div>
    <img style="position:absolute;top:45%;left:35%" src="img/orangespider.thumb.jpg"/>				    
  </section>

  <section class="slide" id="lsst">
    <div style="position:absolute;top:20%;>"<p class="subtle">
      <h4>When the Large Synoptic Survey Telescope (LSST), successor to SDSS, comes online in 2016 it is anticipated to acquire that amount of data every 5 days</h4>
    </p>
    </div>
    <img style="position:absolute;top:40%;left:30%" src="img/lsst.jpg"/>

  </section>

  <section class="slide" id="big-data-geo">
    <h3 style="position:absolute;top:20%;">It happens in our field too</h3>
    <div style="position:relative;top:250px;left:5%">
      <p class="subtle">
	<b>FCC's Broadband Map</b>, first 24 hours:
      <ul>
        <li>Total hits:158,123,884</li>
	<li>Hits served by cache: 141,068,348 (89.21%)</li>
	<li>Total data transferred: 863 GB</li>
	<li>Peak requests per second: 8,970</li>
	<li>Average requests per second: 1,095</li>
	<li>Unique visitors, first 10 hours: ~500,000</li>
      </ul>
      </p>
    </div>

  </section>

  <section class="slide" id="">
    <h1>How can we derive real time statistics from request data?</h1>

  </section>

  <section class="slide" id="">
    <h1 style="position:absolute;top:100px;">We will need:</h1>
    <div style="position:relative;top:120px;">
     <p class="subtle"> 
      <ul>
        <li>A fast way to persist raw request data for further analysis</li>
        <li>A fast way to process (aggregate) the incoming stream of data</li>
        <li>A fast way to query and deliver information, both historic and real time</li>
      </ul>
      <h3>Akka and MongoDB is a possible solution</h3>
     </p> 
    </div> 
  </section>


  <section class="slide" id="akka">
    <img style="position:absolute;top:10%;left:40%" src="img/akka_logo.png"/>
    <h3 style="position:absolute;top:40%;text-align:center">Akka is a toolkit and runtime for building highly concurrent, distributed, and fault tolerant event-driven applications on the JVM</h3>
  </section>

  <section class="slide" id="concurrency">
    <h1 style="position:absolute;top:10%">Concurrency</h1>
    <img style="position:absolute;top:30%;left:35%" src="img/smith_many.jpeg"/>
    <h3 style="position:absolute;top:50%;left:38%">Hard to deal with</h3>

  </section>

  <section class="slide" id="actors">
    <h1 style="position:absolute;top:10%">Akka has actors</h1>
    <img style="position:absolute;top:20%;left:35%" src="img/clooney.jpeg"/>
    <h3 style="position:absolute;top:50%;left:35%">Actors are cool</h3>
  </section>

  <section class="slide" id="akka-actors">
    <h1 style="position:absolute;top:10%">Akka Actors</h1>
    <h3 style="position:absolute;top:20%">Actors are objects which encapsulate state and behavior, they communicate exclusively by exchanging messages which are placed into the recipient's mailbox</h3>
    
    <pre style="position:absolute;top:40%;left:20%;font-size:0.5em;">
      public class Greeting implements Serializable {
        public final String who;
        public Greeting(String who) { this.who = who; }
      }
      
      public class GreetingActor extends UntypedActor {
        LoggingAdapter log = Logging.getLogger(getContext().system(), this);
      
        public void onReceive(Object message) throws Exception {
          if (message instanceof Greeting)
            log.info("Hello " + ((Greeting) message).who);
        }
      }
      
      ActorSystem system = ActorSystem.create("MySystem");
      ActorRef greeter = system.actorOf(new Props(GreetingActor.class), "greeter");
      greeter.tell(new Greeting("Charlie Parker"));</pre>


  </section>

  <section class="slide" id="actors-scala">
    <h1 style="position:absolute;top:10%">In Scala too (*)</h1>
    <img style="position:absolute;top:20%;left:30%" src="img/scala_logo.jpeg"/>
    <pre style="position:absolute;top:30%;left:20%;font-size:0.5em">
      case class Greeting(who: String)
      
      class GreetingActor extends Actor with ActorLogging {
        def receive = {
          case Greeting(who) â‡’ log.info("Hello " + who)
        }
      }
      
      val system = ActorSystem("MySystem")
      val greeter = system.actorOf(Props[GreetingActor], name = "greeter")
      greeter ! Greeting("Charlie Parker")

    </pre>
    <h3 style="position:absolute;top:60%;left:10%">(*) Which is the language you should be using for this stuff</h3>
    
  </section>

  <section class="slide" id="why-actors">
    <h1 style="position:absolute;top:20%">Why Actors?</h1>
    <h3 style="position:absolute;top:40%;left:15%;text-align:center">Message passing style concurrency<br>Asynchronous, event driven programming model</h3>
    <p class="subtle" style="position:absolute;top:60%;left:15%;text-align:center;">Oh, and they are tiny (2.7 million / GB of RAM)</p>  
  </section>

  <section class="slide" id="akka-distributed">
    <h1 style="position:absolute;top:20%">Akka is distributed</h1>
    <h3 style="position:absolute;top:30%;left:10%;text-align:center">Location Transparency<br>Designed for distribution, local deployment is an optimization</h3>
    <pre style="position:absolute;top:50%;left:20%;font-size:0.5em">
    akka {
      actor {
        provider = "akka.remote.RemoteActorRefProvider"
      }
      remote {
        transport = "akka.remote.netty.NettyRemoteTransport"
        netty {
          hostname = "127.0.0.1"
          port = 2552
        }
      }
   }
    </pre>
  </section>

  <section class="slide" id="let-it-crash">
    <h1 style="position:absolute;top:10%">Let it Crash</h1>
    <img style="position:absolute;top:25%;left:20%" src="img/koshinage.jpg"/>
    <p class="subtle" style="position:absolute;top:80%;left:25%;text-align:center;font-size:0.75em">By the way, this Aikido technique is called Koshinage</p>  
  </section>

  <section class="slide" id="fault-tolerance">
    <h1 style="position:absolute;top:20%">Fault Tolerance</h1>
    <h3 style="position:absolute;top:30%;text-align:center"><b>Supervision Hierarchy</b> --> Every actor has a parent. Parents take care of children, do something when they misbehave (stop, restart, etc.)<br>Encourage few top level actors (dhildren of ActorSystem), create your own actors as children of other actors</h3>
  </section>

  <section class="slide" id="futures">
    <h1 style="position:absolute;top:10%">Futures</h1>
    <img style="position:absolute;top:25%;left:25%" src="img/futures.jpg"/>
  </section>

  <section class="slide" id="akka-futures">
    <h1 style="position:absolute;top:20%">Akka Futures</h1>
    <h3 style="position:absolute;top:30%;text-align:center">"Data structures to retrieve the result of a concurrent operation. Results can be retrieved synchronously or asynchronously"<br>Higher abstraction than Java Futures, but uses java.util.concurrency under the hood<br>This is where you really want to use Scala<br>Seriously</h3>
  </section>

  <section class="slide" id="future-composition">
    <h1 style="position:absolute;top:20%">Futures compose</h1>
    <pre style="position:absolute;top:30%;left:20%;font-size:0.5em">
      List&lt;Future&lt;List&lt;RequestStats&gt;&gt;&gt; futures = new ArrayList&lt;Future&lt;List&lt;RequestStats&gt;&gt;&gt;();
      ExecutionContext ec = getContext().system().dispatcher();
      futures.add(future(new ServiceStatsProcessor(payload), ec));
      futures.add(future(new LayerStatsProcessor(payload), ec));
      futures.add(future(new GeoStatsProcessor(payload), ec));
      futures.add(future(new ReferrerProcessor(payload), ec));
      futures.add(future(new IpStatsProcessor(payload), ec));

      // compose a sequence of the futures
      Future&lt;Iterable&lt;List&lt;RequestStats&gt;&gt;&gt; futuresSequence = sequence(futures, ec);

      // block until the futures come back
      log.debug("Processing messages");
      Iterable&lt;List&lt;RequestStats&gt;&gt; results = futuresSequence.result(
         Duration.create(30, TimeUnit.SECONDS), null);
      log.debug("Finished Processing messages");
    </pre>		
  </section>

  <section class="slide" id="camel-integration">
    <h1 style="position:absolute;top:20%">Apache Camel Integration</h1>
    <pre style="position:absolute;top:40%;left:20%;font-size:0.5em">
 public class HttpConsumer extends UntypedConsumerActor implements Consumer {
    @Override
    public void onReceive(Object obj) throws Exception {
        if (obj instanceof CamelMessage) {
            CamelMessage camelMessage = (CamelMessage) obj;
            String json = camelMessage.withBodyAs(String.class, getCamelContext())
                    .body()
                    .toString();
            Payload payload = mapper.readValue(json, Payload.class);
            if (!messageValidator.isValid(payload))
                throw new Exception("Payload is not valid");
            log.debug("Message received and validated: " + payload);
            getContext().system().eventStream().publish(payload);
            getSender().tell("OK", getSelf());
        }
    }
}
    </pre>  
  </section>

  <section class="slide" id="mongodb">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>

  <section class="slide" id="">

  </section>


  <form action="." method="get" class="goto-form">
       <label for="goto-slide">Go to slide:</label>

       <input type="number" name="slidenum" id="goto-slide">
       <input type="submit" value="Go">
  </form>


<script src="externals/deckjs/jquery-1.7.2.min.js"></script>
<script src="externals/deckjs/core/deck.core.js"></script>
<script src="externals/deckjs/extensions/navigation/deck.navigation.js"></script>
<script src="externals/deckjs/extensions/goto/deck.goto.js"></script>
<script src="externals/deckjs/extensions/hash/deck.hash.js"></script>

<script>
    $(function() {
        $.deck(".slide");
    });

</script>

</body>

</html>
>>>>>>> Add initial slides
